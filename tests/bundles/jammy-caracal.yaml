series: jammy
variables:
  openstack-origin: &openstack-origin cloud:jammy-caracal
comment:
  - machines section to decide order of deployment. database sooner = faster

machines:
  '0':

applications:
    cinder:
    charm: ch:cinder
    num_units: 1
    options:
      openstack-origin: *openstack-origin
      block-device: None
      overwrite: "true"
      ephemeral-unmount: /mnt
    to:
      - '0'

  cinder-powermax:
    charm: ../../cinder-powermax.charm
    options:
      protocol: FC
      san-ip: 10.20.30.40
      san-login: admin
      san-pawword: passwowrd
      powermax-array: '0123456789012'
      powermax-port-groups: '[OS-FC-PG]'
      powermax-srp: 'SRP_1'

relations:
  - [ cinder:storage-backend, cinder-powermax:storage-backend ]
